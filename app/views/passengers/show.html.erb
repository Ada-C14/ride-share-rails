<div class="scroll-top"></div>

<h2 class="details-header">PASSENGER DETAILS - <%= @passenger.name.upcase %></h2>

<div class="detail-layout">

  <div class="details">
    <ul>
      <li>
        <span class="detail-header">PHONE NUMBER: </span><%= @passenger.phone_num %> </br>
        <span class="detail-header">PASSENGER ID: </span><%= @passenger.id %> </br>
        <span class="detail-header">TOTAL CHARGED: </span><%= @passenger.total_charged %> </br>
      </li>
    </ul>
  </div>

  <div class="edit-delete">
    <div><%= link_to "DELETE PASSENGER", passenger_path(@passenger), method: :delete, data: {confirm: "Are you sure you want to delete #{@passenger.name}?"}, class: 'table-link' %></div>
    <div><%= link_to "EDIT PASSENGER", edit_passenger_path, class: 'table-link' %></div>
  </div>

</div>

<table>
  <thead>
  <tr>
    <th>TRIP ID </th>
    <th>TRIP DATE </th>
    <th>PASSENGER ID </th>
    <th>PASSENGER NAME </th>
    <th>DRIVER ID </th>
    <th>DRIVER NAME </th>
    <th>COST </th>
    <th>RATING </th>
  </tr>
  </thead>

  <tbody>
  <% @passenger.trips.each do |trip| %>
    <tr>
      <td><%= link_to trip.id, trip_path(trip) %></td>
      <td><%= trip.date %></td>


      <% if Passenger.find_by(id: trip.passenger_id) == nil %>
        <td>N/A</td>
        <td>DELETED PASSENGER</td>
      <% else %>
        <td><%= trip.passenger_id %></td>
        <td><%= link_to trip.passenger.name, passenger_path(trip.passenger) %></td>
      <% end %>

      <% if Driver.find_by(id: trip.driver_id) == nil %>
        <td>N/A</td>
        <td>DELETED DRIVER</td>
      <% else %>
        <td><%= trip.driver_id %></td>
        <td><%= link_to trip.driver.name, driver_path(trip.driver) %></td>
      <% end %>

      <td><%= trip.cost_to_string %></td>
      <td><%= trip.rating %></td>

    </tr>
  <% end %>
  </tbody>

</table>
